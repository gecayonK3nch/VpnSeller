# Telegram VPN Bot (AmneziaWG)

–≠—Ç–æ—Ç –±–æ—Ç –ø—Ä–æ–¥–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ VPN, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–æ—Ç–æ–∫–æ–ª AmneziaWG.

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

–ß—Ç–æ–±—ã –Ω–µ —Å–ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä–≤–µ—Ä Amnezia, –º—ã —Å–æ–∑–¥–∞–¥–∏–º **–æ—Ç–¥–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –±–æ—Ç–∞.

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã `amneziawg-tools`. –ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ —Å—Ç–æ–∏—Ç Amnezia, –æ–Ω–∏ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –µ—Å—Ç—å. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–º–∞–Ω–¥–æ–π:
```bash
awg --help
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –±–æ—Ç–∞
–ú—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `awg1` (—á—Ç–æ–±—ã –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å `awg0` –∏–ª–∏ `wg0` –æ—Ç Amnezia) –∏ –ø–æ—Ä—Ç `51821`.

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/amnezia/amneziawg/awg1.conf`:

```ini
[Interface]
# –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á —Å–µ—Ä–≤–µ—Ä–∞ (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥–æ–π: awg genkey)
PrivateKey = <–í–ê–®_–ü–†–ò–í–ê–¢–ù–´–ô_–ö–õ–Æ–ß_–°–ï–†–í–ï–†–ê>
Address = 10.9.0.1/24
ListenPort = 51821

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ (–î–û–õ–ñ–ù–´ –°–û–í–ü–ê–î–ê–¢–¨ –° .env –ë–û–¢–ê)
Jc = 4
Jmin = 50
Jmax = 1000
S1 = 15
S2 = 25
H1 = 1
H2 = 2
H3 = 3
H4 = 4

# –ü—Ä–∞–≤–∏–ª–∞ iptables –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
PostUp = iptables -A FORWARD -i awg1 -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
PostDown = iptables -D FORWARD -i awg1 -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE
```
*–ó–∞–º–µ–Ω–∏—Ç–µ `eth0` –Ω–∞ –∏–º—è –≤–∞—à–µ–≥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–º–∞–Ω–¥–æ–π `ip a`).*

### 3. –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
```bash
systemctl enable amneziawg-quick@awg1
systemctl start amneziawg-quick@awg1
```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞

1. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ `.env`**:
   –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ —É–∫–∞–∂–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ (—Ç–µ –∂–µ, —á—Ç–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ —Å–µ—Ä–≤–µ—Ä–∞!).

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
   ```bash
   pip install -r requirements.txt
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞**:
   ```bash
   python3 -m src.bot
   ```

## ‚öôÔ∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ß—Ç–æ–±—ã —Å—Ç–∞—Ç—å –∞–¥–º–∏–Ω–æ–º, –¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π ID –≤ `ADMIN_IDS` –≤ `.env`.
- –ö–æ–º–∞–Ω–¥–∞ `/admin` –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–∞–Ω–µ–ª—å.
- –ö–æ–º–∞–Ω–¥–∞ `/add_sub <id> <days>` –≤—ã–¥–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É –≤—Ä—É—á–Ω—É—é.
